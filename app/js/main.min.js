document.querySelectorAll(".slider").length>0&&document.querySelectorAll(".slider").forEach((e=>{document.documentElement.clientWidth<=1024&&(e.dataset.visible=1);let t=+e.dataset.visible,l="true"==e.dataset.infinite?-t:0,s=e.querySelector(".slider__track"),r=e.getElementsByClassName("slider__slide"),a=e.querySelector(".slider__wrapper").offsetWidth/t;for(const e of r)e.style.width=a+"px",1==t&&(e.style.padding=0);if(window.addEventListener("resize",(()=>{t=+e.dataset.visible,l="true"==e.dataset.infinite?-t:0,s=e.querySelector(".slider__track"),r=e.getElementsByClassName("slider__slide"),a=e.querySelector(".slider__wrapper").offsetWidth/t;for(const e of r)e.style.width=a+"px",1==t&&(e.style.padding=0);s.style.width=a*r.length+"px",s.style.left=a*l+"px"})),"true"==e.dataset.infinite){for(let e=0;e<t;e++){let t=r[r.length-1-e].cloneNode(!0);s.prepend(t),console.log()}for(let e=0;e<t;e++){let l=r[e+t].cloneNode(!0);s.appendChild(l),console.log(l)}s.addEventListener("transitionend",(()=>{0==Math.abs(l)&&(l=-(r.length-t)+ +t,s.style.left=a*l+"px"),Math.abs(l)>=r.length-t&&(l=-t,s.style.left=a*l+"px")}))}if(s.style.width=a*r.length+"px",s.style.left=a*l+"px",e.querySelector(".slider__dots")){let a=e.querySelector(".slider__dots");for(i=0;i<r.length-2*t;i++){let e=document.createElement("button");e.classList.add("slider__dot"),a.append(e)}let d=e.querySelectorAll(".slider__dot");d[0].classList.add("active");let c=a.offsetHeight;e.querySelectorAll(".slider__control").forEach((e=>e.style.top=`calc(50% - ${c}px)`)),d.forEach(((e,t)=>{e.addEventListener("click",(()=>{s.classList.contains("_shifting")||e.classList.contains("active")||(o(300),n(t),console.log(l,t),d.forEach((e=>e.classList.remove("active"))),d[Math.abs(l)].classList.add("active"))}))}))}e.addEventListener("click",(t=>{if(!s.classList.contains("_shifting")&&(t.target.closest(".slider__control--prev")&&d(),t.target.closest(".slider__control--next")&&c(),e.querySelector(".slider__dots"))){let t=e.querySelectorAll(".slider__dot");t.forEach((e=>e.classList.remove("active"))),t[Math.abs(l)].classList.add("active")}}));let n=e=>{l=-e,s.style.left=a*l+"px"},o=(e=500)=>{s.classList.add("_shifting"),s.style.transitionProperty="left",s.style.transitionDuration=e+"ms",s.addEventListener("transitionend",(()=>{s.style.removeProperty("transition-property"),s.style.removeProperty("transition-duration"),s.classList.remove("_shifting")}))},d=()=>{Math.abs(l)<=0?"true"==!e.dataset.infinite&&(o(300),s.style.left=a*-(r.length-t)+"px",l=-(r.length-t)):(o(300),s.style.left=a*++l+"px")},c=()=>{Math.abs(l)>=r.length-t?"true"==!e.dataset.infinite&&(o(300),s.style.left=0,l=0):(o(300),s.style.left=a*--l+"px")}}));